<!doctype html>
<html>
	<head>

		<title>101 Concurrency</title>
		<link rel="shortcut icon" href="images/favicon.ico" />

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="./reveal.js/dist/reset.css">
		<link rel="stylesheet" href="./reveal.js/dist/reveal.css">
		<link rel="stylesheet" href="./reveal.js/dist/theme/white.css" id="theme">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="./reveal.js/plugin/highlight/monokai.css" id="highlight-theme">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<section>
						<h2 style="color:red">WIP</h2>
						<img src="images/duke-threads.jpg" width="40%">
						<p>
							Introduction about Concurrency bugs Hunting with JCStress.<br />
							<small>Juan Antonio Breña Moral</small>
						</p>
					</section>
					<section>
						<p>Follow the talk from your smartphone:</p>
						<img src="images/qrcode.png" width="40%" />
					</section>
					<section>
						<p>Example repository:</p>
						<a href="https://github.com/jabrena/101-concurrency" target="_blank">
							<img src="images/github.png" width="35%">
						</a>
						<p>
							<a href="https://github.com/jabrena/101-concurrency" target="_blank">
								https://github.com/jabrena/101-concurrency
							</a>
						</p>
					</section>
				</section>
				<section>
					<section>
						<h2>Agenda</h2>
						<ol>
							<li>Who I am</li>
							<li>Expectations</li>
							<li>Root causes</li>
							<!-- <li>Context</li> -->
							<li>Non funcional requirements</li>
							<li>Concurrency models</li>
							<!-- <li>Concurrency concepts</li> -->
							<!-- <li>Concurrency evolution in the JVM</li> -->
							<li>Design patterns that impacts you</li>
							<!-- <li>Other concurrency approaches</li> -->
							<li>One example to ilustrate it</li>
							<li>Concurrency tools: JCStress</li>
							<li>How to help the team?</li>
							<li>References</li>
							<li>Q&A</li>
						</ol>
					</section>
				</section>
				<section>
					<section>
						<h2>Who I am</h2>
						<h3>Juan Antonio Breña Moral</h3>
						<table>
							<tr>
								<td>
									<img src="./images/jab-avatar.png" width="100%"/>
								</td>
								<td style="vertical-align: top">
									<!-- Computer Science and Engineering (B.S.) <br /> -->
									Engineering in Industrial Organization (M.S.) @ <span>ICAI</span> <br />
									Head of Developer Relations @ <span>Amadeus for developers</span> <br />
									Associate Professor @ <span>ICAI</span> <br />
									STEAM Teacher @ <span>Space Math</span> <br />
									<a target="_blank" style="text-decoration: underline;" href="https://twitter.com/juanantoniobm">@juanantoniobm</a> |
									<a target="_blank" style="text-decoration: underline;" href="https://github.com/jabrena">Github</a></li>
								</td>
							</tr>
						</table>
					</section>
				</section>
				<section>
					<section>
						<h2>Expectations</h2>
						<ul>
							<li>Generate curiosity about potential issues by concurrency.</li>
							<li>Understand better the Java Memory Model.</li>
							<li>Understand the evolution of concurrency in Java.</li>
							<li>Learn how to use JCStress in your projects</li>
						</ul>
					</section>
				</section>
				<section>
					<section>
						<h2>Root causes</h2>
						<ul>
							<li>Engineering teams bad designed.</li>
							<li>Cognitive load issues.</li>
							<li>Lack of specialists about concurrency in your BU.</li>
							<li>Lack of internal trainings about concurrency.</li>
							<li>Bad delegation of complex tasks.</li>
							<li>Projects with non functional requirements well defined.</li>
							<li>Engineers more focused on cool features from Frameworks than language fundamentals.</li>
							<li>Project bad estimated.</li>
							<li>...</li>
						</ul>
					</section>
					<section>
						<h2>Root causes</h2>
						<p>
							And the party begin...
						</p>
						<img src="images/lemmings.png" width="50%"/>
					</section>
					<section>
						<h2>Root causes</h2>
						<p>
							What root causes are missing from your point of view?
						</p>
						<img src="images/feedback.png" width="30%"/>
					</section>
				</section>
				<!--
				<section>
					<section>
						<h2>Context</h2>
						<ul>
							<li>In many cases, non funcional requirements are not well defined.</li>
							<li>If the team are using some kind of "Agile flavour", the definition of Done, doesnt´t define aspects about non funcional requirements.</li>
							<li>The Java programming language has included Multithreading features since 1996 (Java 1.0).</li>
						</ul>
					</section>
					<section>
						<h2>Context</h2>
						<ul>
							<li>Not all Java developers understand how to program thread-safety code.</li>
							<li>Handling shared memory is the main approach in Java but it is not the unique approach.</li>
							<li>Is it still valid the term: "Write once, run everywhere"? (When you deploy multithreading code in production).</li>
						</ul>
					</section>
					<! --
					<section>
						<img src="images/quiz.png" width="50%"/>
					</section>
					<section>
						<h2>Context</h2>
						<h4>Question: What is the java version used in production?</h4>
						<p>
							<a href="https://pollev.com/juanantoniobrenamoral114" target="_blank">https://pollev.com/juanantoniobrenamoral114</a>
						</p>
					</section>
					<section>
						<h2>Context</h2>
						<h4>Question: Did all your team members read "Concurrent Programming in Java" or "Java concurrency in practice" at least once?</h4>
						<p>
							<a href="https://pollev.com/juanantoniobrenamoral114" target="_blank">https://pollev.com/juanantoniobrenamoral114</a>
						</p>
						<img src="images/book-java-concurrency-in-practice.jpg" width="24%" />&nbsp;
						<img src="images/book-concurrent-programming-in-java.jpg" width="25%" />
					</section>
					<section>
						<h2>Context</h2>
						<h4>Question: Did you face in the past a Concurrency issue?</h4>
						<p>
							<a href="https://pollev.com/juanantoniobrenamoral114" target="_blank">https://pollev.com/juanantoniobrenamoral114</a>
						</p>
					</section>
					<section>
						<h2>Context</h2>
						<h4>Question: What kind of concurrency objects or language resources, do you use in your daily job?</h4>
						<p>
							<a href="https://pollev.com/juanantoniobrenamoral114" target="_blank">https://pollev.com/juanantoniobrenamoral114</a>
						</p>
					</section>
					-- >
				</section>
				-->
				<section>
					<section>
						<h2>Non funcional requirements</h2>
						<p>
							Do you define properly the non functional requirements in your projects?
						</p>
						<img src="images/iceberg.png" width="50%"/>
					</section>
					<section>
						<h2>Non funcional requirements</h2>
						<h4>ISO 25010</h4>
						<p>
							ISO 25010, titled “System and software quality models”, is a software quality standard.
							It describes the models, consisting of characteristics and sub-characteristics,
							for both software product quality, and software quality in use together with practical
							guidance on the use of the quality models.
						</p>
						<small><strong>Source:</strong>
							<a href="https://iso25000.com/index.php/en/iso-25000-standards/iso-25010" target="_blank">
								https://iso25000.com/index.php/en/iso-25000-standards/iso-25010</a>
						</small>
					</section>
					<section>
						<h2>Non funcional requirements</h2>
						<h4>ISO 25010</h4>
						<img src="images/iso-25010.png" />
						<br />
						<small><strong>Source:</strong>
							<a href="https://iso25000.com/index.php/en/iso-25000-standards/iso-25010" target="_blank">
								https://iso25000.com/index.php/en/iso-25000-standards/iso-25010</a>
						</small>
					</section>
				</section>
				<!--
				<section>
					<section>
						<h2>Concurrency concepts</h2>
						<ul>
							<li>Concurrency & Parallelism</li>
							<li>Amdahl's law</li>
							<li>Cache coherency</li>
							<li>JMM, Java memory model</li>
						</ul>
					</section>
					<section>
						<h2>Concurrency concepts</h2>
						<h4>Concurrency & Parallelism</h4>
						<img src="images/concurrency-parallelism.png" width="70%" />
					</section>
					<section>
						<h2>Concurrency concepts</h2>
						<h4>Amdahl's law</h4>
						<p>
							Amdahl's law is a formula which gives the theoretical speedup in latency
							of the execution of a task at fixed workload that can be expected of
							a system whose resources are improved.
							Specifically, it states that "the overall performance improvement gained by optimizing
							a single part of a system is limited by the fraction of time that the improved part
							is actually used".
						</p>
						<a href="https://en.wikipedia.org/wiki/Amdahl%27s_law" target="_blank">https://en.wikipedia.org/wiki/Amdahl%27s_law</a>
					</section>
					-->
					<!--
					http://www.cs.umd.edu/~pugh/java/memoryModel/Dagstuhl.pdf
					https://chowdera.com/2022/04/202204030513095225.html
					https://www.cs.umd.edu/~pugh/java/memoryModel/jsr133.pdf
					https://www.slideshare.net/instinctools_EE_Labs/java-memory-model-66558368
					https://shipilev.net/talks/geecon-May2018-jmm.pdf
					https://shipilev.net/blog/2014/safe-public-construction/
					https://shipilev.net/blog/2014/jmm-pragmatics/
					https://shipilev.net/talks/narnia-2555-jmm-pragmatics-en.pdf
					https://shipilev.net/blog/2016/close-encounters-of-jmm-kind/
					-->
					<!--
					<section>
						<h2>Concurrency concepts</h2>
						<h4>JMM, Java memory model</h4>
						<p>
							Defines the semantics of multithreaded programs
						</p>
						<p>
							The Java memory model describes how threads in the Java programming language
							interact through memory. Together with the description of single-threaded execution of code,
							the memory model provides the semantics of the Java programming language.
						</p>
						<a href="https://en.wikipedia.org/wiki/Java_memory_model" target="_blank">https://en.wikipedia.org/wiki/Java_memory_model</a>
					</section>
					<section>
						<h2>Concurrency concepts</h2>
						<h4>JMM, Java memory model</h4>
						<ul>
							<li>Modern hardware architecture</li>
							<li>How JVM interacts with hardware</li>
							<li>What is shared memory?</li>
						</ul>
					</section>
					<section>
						<h2>Concurrency concepts</h2>
						<h4>JMM, Java memory model</h4>
						<ul>
							<li>Atomicity:
								Which instructions must have indivisible effects.
								For purposes of the model, these rules need to be stated only for simple reads
								and writes of memory cells representing fields - instance and static variables,
								also including array elements, but not including local variables inside methods.</li>
							<li>Visibility:
								Under what conditions the effects of one thread are visible to another.
								The effects of interest here are writes to fields, as seen via reads of those fields.</li>
							<li>Ordering:
								Under what conditions the effects of operations can appear out of order
								to any given thread. The main ordering issues surround reads and writes associated
								with sequences of assignment statements.</li>

						</ul>
					</section>
					<section>
						<h2>Concurrency concepts</h2>
						<h4>JMM, Java memory model</h4>
						<img src="images/jmm-1.png" width="70%" />
					</section>
					<section>
						<h2>Concurrency concepts</h2>
						<h4>JMM, Java memory model</h4>
						<img src="images/jmm-2.png" width="70%" />
					</section>
				</section>
				-->
				<section>
					<section>
						<h2>Concurrency models</h2>
						<img src="images/lang-rank-0122.png" width="50%">
						<br />
						<small><strong>Source:</strong>
							<a href="https://redmonk.com/sogrady/2022/03/28/language-rankings-1-22/" target="_blank">
								https://redmonk.com/sogrady/2022/03/28/language-rankings-1-22/</a>
						</small>
					</section>
					<section>
						<h2>Concurrency models</h2>
						<small>
							<table>
								<tr>
									<th>Lang</th>
									<th>Shared memory</th>
									<th>CSP</th>
									<th>Actors</th>
									<th>Async Await</th>
									<th>Mono thread</th>
									<th>Multi threads</th>
									<th>Multi core</th>
									<th>OS Threads</th>
									<th>Green Threads</th>
								</tr>
								<tr>
									<td><a href="https://www.java.com/" target="_blank">Java</a></td>
									<td><a href="https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html" target="_blank">Yes</a></td>
									<td>No</td>
									<td>No</td>
									<td>No</td>
									<td>No</td>
									<td>Yes</td>
									<td>Yes</td>
									<td>Yes</td>
									<td>Yes</td>
								</tr>
								<!--
                                https://superfastpython.com/multiprocessing-in-python/
                                -->
								<tr>
									<td><a href="https://www.python.org/" target="_blank">Python</a></td>
									<td><a href="https://docs.python.org/3/library/multiprocessing.shared_memory.html" target="_blank">Yes</a></td>
									<td>No</td>
									<td>No</td>
									<td><a href="https://docs.python.org/3/library/asyncio.html" target="_blank">Yes</a></td>
									<td><a href="https://docs.python.org/3/c-api/init.html#thread-state-and-the-global-interpreter-lock" target="_blank">Yes</a></td>
									<td><a href="https://docs.python.org/3/library/threading.html" target="_blank">Yes*</a></td>
									<td><a href="https://docs.python.org/3/library/multiprocessing.html" target="_blank">Yes*</a></td>
									<td>Yes</td>
									<td>No</td>
								</tr>
								<tr>
									<td><a href="https://nodejs.org" target="_blank">Node.js</a></td>
									<td>No</td>
									<td>No</td>
									<td>No</td>
									<td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank">Yes</a></td>
									<td>Yes</td>
									<td>No</td>
									<td><a href="https://nodejs.org/api/cluster.html" target="_blank">Yes*</a></td>
									<td>Yes</td>
									<td>No</td>
								</tr>
								<tr>
									<td><a href="https://www.php.net/" target="_blank">PHP</a></td>
									<td>No</td>
									<td>No</td>
									<td>No</td>
									<td>No</td>
									<td>Yes</td>
									<td>No</td>
									<td>No</td>
									<td>Yes</td>
									<td><a href="https://wiki.php.net/rfc/fibers" target="_blank">Yes*</a></td>
								</tr>
								<tr>
									<td><a href="https://elixir-lang.org/" target="_blank">Elixir</a></td>
									<td>No</td>
									<td><a href="https://elixir-lang.org/getting-started/processes.html" target="_blank">Yes</a></td>
									<td>Yes</td>
									<td><a href="https://hexdocs.pm/elixir/1.13/Task.html" target="_blank">Yes</a></td>
									<td>No</td>
									<td>Yes</td>
									<td>Yes</td>
									<td>Yes</td>
									<td>Yes</td>
								</tr>
								<!--
                                https://medium.com/@aversanamichele/exploiting-multiple-cores-using-concurrency-and-task-groups-in-swift-adfbc5b7fbcf
                                -->
								<tr>
									<td><a href="https://www.swift.org/" target="_blank">Swift</a></td>
									<td>No</td>
									<td><a href="https://www.swift.org/blog/distributed-actors/" target="_blank">Yes</a></td>
									<td><a href="https://www.swift.org/blog/distributed-actors/" target="_blank">Yes</a></td>
									<td><a href="https://www.swift.org/blog/distributed-actors/" target="_blank">Yes</a></td>
									<td>No</td>
									<td><a href="https://docs.swift.org/swift-book/LanguageGuide/Concurrency.html" target="_blank">Yes</a></td>
									<td>Yes</td>
									<td>Yes</td>
									<td>No</td>
								</tr>
								<tr>
									<td><a href="https://dart.dev/" target="_blank">Dart</a></td>
									<td>No</td>
									<td><a href="https://dart.dev/guides/language/concurrency" target="_blank">Yes</a></td>
									<td>No</td>
									<td><a href="https://dart.dev/codelabs/async-await" target="_blank">Yes</a></td>
									<td>No</td>
									<td>Yes</td>
									<td>Yes</td>
									<td>Yes</td>
									<td>No</td>
								</tr>
								<tr>
									<td><a href="https://go.dev/" target="_blank">Go</a></td>
									<td>No</td>
									<td><a href="https://go.dev/tour/concurrency/2" target="_blank">Yes</a></td>
									<td>No</td>
									<td>No</td>
									<td>No</td>
									<td>Yes</td>
									<td>Yes</td>
									<td>No</td>
									<td>Yes</td>
								</tr>
								<tr>
									<td><a href="https://www.rust-lang.org/" target="_blank">Rust</a></td>
									<td>Yes</td>
									<td>Yes</td>
									<td>No</td>
									<td>Yes</td>
									<td>No</td>
									<td>Yes</td>
									<td>Yes</td>
									<td>Yes</td>
									<td>No</td>
								</tr>
							</table>
						</small>
					</section>
					<!--
					https://www.baeldung.com/java-thread-lifecycle
					https://dzone.com/articles/java-concurrency-evolution
					-->
					<section>
						<h2>Concurrency models</h2>
						<ul>
							<li>Java 1.0 : Java Threads (23/01/1996)</li>
							<li>Java 1.5 : JSR 133, java.util.concurrent.* (30/09/2004)</li>
							<li>Java 1.7 : Fork/join framework (07/07/2011)</li>
							<li>Java 1.8 : CompletableFuture (18/03/2014)</li>
							<li>Java 19&nbsp;&nbsp;: Virtual Threads, Structured Concurrency (20/09/2022)</li>
						</ul>
					</section>
					<!--
					<section>
						<h2>Concurrency models & evolution</h2>
						<h3>Java 1.0 / Java Threads (23/01/1996)</h3>
						<ul>
							<li>PENDING</li>
							<li>PENDING</li>
							<li>PENDING</li>
							<li>PENDING</li>
						</ul>
					</section>
					<section>
						<h2>Concurrency evolution in the JVM</h2>
						<h3>Java 1.0 / Java Threads (23/01/1996)</h3>
						<img src="images/thread-life-cycle.jpg" width="50%"/>
					</section>
					<section>
						<h2>Concurrency models & evolution</h2>
						<h3>Java 1.0 / Java Threads (23/01/1996)</h3>
						<img src="images/os-threads.png" width="70%"/>
					</section>
					<section>
						<h2>Concurrency models & evolution</h2>
						<h3>Java 1.0 / Java Threads (23/01/1996)</h3>
						<pre><code data-trim>
class Process implements Runnable {
    public void run() {
        System.out.println("Thread is running...");
    }
}
public class ThreadBasic {
    public static void main(String args[]) throws InterruptedException {
        Process m1 = new Process();
        Thread t1 =new Thread(m1);
        t1.start();
        t1.join();
        System.out.println("Example finished");
    }
}

						</code></pre>
					</section>
					<section>
						<h2>Concurrency models & evolution</h2>
						<h3>Java 1.0 / Java Threads (23/01/1996)</h3>
						<pre><code data-trim>
Thread is running...
Example finished
						</code></pre>
					</section>
					<section>
						<h2>Concurrency models & evolution</h2>
						<h3>Java 1.0 / Java Threads (23/01/1996)</h3>
						<p>
							Javadocs:
						</p>
						<ul>
							<li><a href="http://web.archive.org/web/19990202194011/http://java.sun.com/products/jdk/1.0.2/api/" target="_blank">Java 1.0.2 Javadocs</a> (Web Archive)</li>
							<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html" target="_blank">Thread</a> </li>
							<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html" target="_blank">Runnable</a> </li>
						</ul>
					</section>
					<! --
					https://en.wikipedia.org/wiki/Java_memory_model
					https://jenkov.com/tutorials/java-concurrency/java-memory-model.html
					-- >
					<section>
						<h2>Concurrency models & evolution</h2>
						<h3>Java 1.5 / JSR 133, java.util.concurrent.* (30/09/2004)</h3>
						<ul>
							<li>PENDING</li>
							<li>PENDING</li>
							<li>PENDING</li>
							<li>PENDING</li>
						</ul>
					</section>
					<section>
						<h2>Concurrency models & evolution</h2>
						<h3>Java 1.5 / JSR 133, java.util.concurrent.* (30/09/2004)</h3>
						<img src="images/java-memory-model-4.png" width="40%"/>
					</section>
					<section>
						<h2>Concurrency models & evolution</h2>
						<h3>Java 1.5 / JSR 133, java.util.concurrent.* (30/09/2004)</h3>
						<img src="images/java-memory-model-3.png" width="40%"/>
					</section>
					<section>
						<h2>Concurrency models & evolution</h2>
						<h3>Java 1.5 / JSR 133, java.util.concurrent.* (30/09/2004)</h3>
						<img src="images/executor-service.jpg" width="60%"/>
					</section>
					<section>
						<h2>Concurrency models & evolution</h2>
						<! -- <h3>Java 1.5 / JSR 133, java.util.concurrent.* (30/09/2004)</h3> -- >
						<pre><code data-trim>
public class ExecutorServiceBasic {
    private static CountDownLatch latch = new CountDownLatch(1);
    public static void main(String args[]) throws InterruptedException {
        ExecutorService executor = Executors.newFixedThreadPool(2);
        executor.submit(new Process2());
        latch.await();
        executor.shutdown();
        executor.awaitTermination(60, TimeUnit.SECONDS);
        System.out.println("Example finished");
    }
    static class Process2 implements Runnable {
        public void run() {
            System.out.println("Thread is running...");
            latch.countDown();
        }
    }
}

						</code></pre>
					</section>
					<section>
						<h2>Concurrency models & evolution</h2>
						<h3>Java 1.5 / JSR 133, java.util.concurrent.* (30/09/2004)</h3>
						<pre><code data-trim>
Thread is running...
Example finished
						</code></pre>
					</section>
					<section>
						<h2>Concurrency models & evolution</h2>
						<! -- <h3>Java 1.5 / JSR 133, java.util.concurrent.* (30/09/2004)</h3>-- >
						<p>
							References:
						</p>
						<ul>
							<li><a href="https://docs.oracle.com/javase/1.5.0/docs/api/" target="_blank">Java 1.5.0 Javadocs</a></li>
							<li><a href="https://download.oracle.com/otndocs/jcp/memory_model-1.0-pfd-spec-oth-JSpec/" target="_blank">JSR-133 Java Memory Model and Thread Specification 1.0</a> </li>
							<li><a href="https://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorService.html" target="_blank">ExecutorService</a></li>
							<li><a href="https://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html" target="_blank">Future</a></li>
							<li><a href="https://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/package-summary.html">Package java.util.concurrent.atomic</a></li>
							<li><a href="https://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/package-summary.html">Package java.util.concurrent.locks</a> </li>
						</ul>
					</section>
					<section>
						<h2>Concurrency models & evolution</h2>
						<h3>Java 1.7 / Fork/join framework (07/07/2011)</h3>
						<ul>
							<li>PENDING</li>
							<li>PENDING</li>
							<li>PENDING</li>
							<li>PENDING</li>
						</ul>
					</section>
					<! --
					http://rashidnoorani.blogspot.com/2012/08/how-to-use-fork-join-framework-features.html
					https://github.com/bejancsaba/java-concurrency-evolution
					https://github.com/bejancsaba/java-concurrency-evolution-loom
					-- >
					<section>
						<h2>Concurrency models & evolution</h2>
						<h3>Java 1.8 / CompletableFuture (18/03/2014)</h3>
						<ul>
							<li>PENDING</li>
							<li>PENDING</li>
							<li>PENDING</li>
							<li>PENDING</li>
						</ul>
					</section>
					<section>
						<h2>Concurrency models & evolution</h2>
						<h3>Java 19 / Virtual Threads, Structured Concurrency (20/09/2022)</h3>
						<ul>
							<li>PENDING</li>
							<li>PENDING</li>
							<li>PENDING</li>
							<li>PENDING</li>
						</ul>
					</section>
					-->
				</section>
				<section>
					<section>
						<h2>Design patterns that impacts you</h2>
						<ul>
							<li>CDI, Contexts and Dependency Injection</li>
							<img src="images/spring-container.png" />
						</ul>
					</section>
					<section>
						<h2>Design patterns that impacts you</h2>
						<h4>CDI, Contexts and Dependency Injection</h4>
						<p>
							CDI (Contexts and Dependency Injection) is a standard
							dependency injection framework included in Jakarta EE.
							It allows us to manage the lifecycle of
							stateful components via domain-specific lifecycle
							contexts and inject components (services) into client
							objects in a type-safe way.
						</p>
					</section>
				</section>
				<!--
				https://github.com/awspring/spring-cloud-aws/search?l=Java&q=%22synchronized+%28this.%22
				https://github.com/search?l=Java&q=org%3Aspring-projects+%22import+java.util.concurrent.locks.%22&type=Code
				https://github.com/search?l=Java&q=org%3Aspring-projects+%22volatile+%22&type=Code
				https://github.com/search?l=Java&q=org%3Aspring-projects+%22synchronized+%28this%22&type=Code
				https://github.com/search?l=Java&q=org%3Aquarkusio+%22volatile+%22&type=Code
				https://github.com/search?q=org%3Aquarkusio+%22synchronized+%28this%22&type=code
				https://github.com/search?q=org%3Aquarkusio+%22import+java.util.concurrent.locks.%22&type=code
				https://github.com/search?l=Java&q=org%3Amicronaut-projects+%22import+java.util.concurrent.locks.%22&type=Code
				https://github.com/search?q=org%3Amicronaut-projects+%22synchronized+%28this%22&type=code
				https://github.com/search?l=Java&q=org%3Amicronaut-projects+%22volatile+%22&type=Code
				https://github.com/search?q=org%3Areactor+jcstress&type=code
				https://github.com/reactor/reactor-core/blob/main/reactor-core/src/jcstress/java/reactor/util/concurrent/MpscLinkedQueueStressTest.java
				https://github.com/reactor/reactor-core/blob/main/reactor-core/src/test/java/reactor/util/concurrent/MpscLinkedQueueTest.java
				https://github.com/reactor/reactor-core/blob/main/reactor-core/src/main/java/reactor/util/concurrent/MpscLinkedQueue.java
				-->
				<section>
					<h2>One example to ilustrate it</h2>
					<img src="images/example1.png" />
				</section>
				<!--
				<section>
					<section>
						<h2>Other concurrency approaches</h2>
						<ul>
							<li>Actor model</li>
							<li>CPS, Communicating Sequential Processes</li>
						</ul>
					</section>
				</section>
				-->
				<!--
				https://foojay.io/today/jcstress/
				https://www.baeldung.com/java-testing-multithreaded#4-java-jcstress
				https://shipilev.net/talks/geecon-May2018-jmm.pdf
				https://shipilev.net/blog/2014/jmm-pragmatics/#_preface
				https://shipilev.net/talks/narnia-2555-jmm-pragmatics-en.pdf
				https://shipilev.net/blog/2016/close-encounters-of-jmm-kind/

				./gradlew clean jcstress --tests "Calculator5Test"
				-->
				<section>
					<section>
						<h2>Concurrency tools: JCStress</h2>
						<ul>
							<li>Introduction</li>
							<li>Who is behind the library?</li>
							<li>What are the benefits?</li>
							<li>Creating your first JCStress test</li>
							<li>Does exist plugins?</li>
							<li>What projects are using the JCStress?</li>
						</ul>
					</section>
					<section>
						<h2>Concurrency tools: JCStress</h2>
						<h3>Introduction</h3>
						<p>
							The Java Concurrency Stress (jcstress) is the experimental harness and
							a suite of tests to aid the research in the correctness of concurrency support
							in the JVM, class libraries, and hardware.
						</p>
						<a href="https://github.com/openjdk/jcstress" target="_blank">https://github.com/openjdk/jcstress</a>
					</section>
					<section>
						<h2>Concurrency tools: JCStress</h2>
						<h3>Who is behind the library?</h3>
						<p>
							Aleksey Shipilëv is working on Java performance for 10+ years.
							Today he is employed by Red Hat, where he does OpenJDK development and performance work.
							Aleksey develops and maintains a number of OpenJDK subprojects,
							including
							<a href="https://github.com/openjdk/jmh" target="_blank">JMH</a>,
							<a href="https://github.com/openjdk/jol" target="_blank">JOL</a> and
							<a href="https://github.com/openjdk/jcstress" target="_blank">JCStress</a>.
						</p>
						<a href="https://shipilev.net/" target="_blank">https://shipilev.net/</a>
					</section>
					<section>
						<h2>Concurrency tools: JCStress</h2>
						<h3>What are the benefits?</h3>
						<ul>
							<li>Increase the capacity to test for concurrency in your Java classes
								that you know that the class is sharing state.</li>
						</ul>
					</section>
					<section>
						<h2>Concurrency tools: JCStress</h2>
						<h4>Creating your first JCStress test</h4>
						<ul>
							<li>Review in your project, classes where you are maintaing state</li>
							<li>With that list of classes, try to create JCStress tests</li>
						</ul>
					</section>
					<section>
						<h2>Concurrency tools: JCStress</h2>
						<h4>Creating your first JCStress test</h4>
						<pre><code data-trim>
@NotThreadSafe
public class Account {
    private int balance;
    public Account(int balance) {
        this.balance = balance;
    }
    public int getBalance() {
        return this.balance;
    }
    public int withdraw(int amount) {
        this.balance = this.balance - amount;
        return this.balance;
    }
}
						</code></pre>
					</section>
					<section>
						<h2>Concurrency tools: JCStress</h2>
						<h4>Creating your first JCStress test</h4>
						<img src="images/demo.png" />
					</section>
					<section>
						<h2>Concurrency tools: JCStress</h2>
						<ul>
							<li>I:  int</li>
							<li>Z:  boolean</li>
							<li>F:  float</li>
							<li>J:  long</li>
							<li>S:  short</li>
							<li>B:  byte</li>
							<li>C:  char</li>
							<li>D:  double</li>
							<li>L:  object</li>
						</ul>
					</section>

				</section>
				<section>
					<section>
						<h2>How to help the team?</h2>
						<ul>
							<li>PENDING</li>
							<li>PENDING</li>
							<li>PENDING</li>
							<li>PENDING</li>
						</ul>
					</section>
				</section>
				<section>
					<section>
						<h2>References</h2>
						<ul>
							<li>https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html</li>
							<li>http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html</li>
							<li>https://web.archive.org/web/20220601003130/http://gee.cs.oswego.edu/dl/jmm/cookbook.html</li>
							<li>https://web.archive.org/web/20220601003130/http://gee.cs.oswego.edu/dl/html/j9mm.html</li>
							<li>https://openjdk.org/jeps/193</li>
						</ul>
					</section>
				</section>
				<section>
					<section>
						<h2>Q&A</h2>
					</section>
				</section>
			</div>
		</div>

		<script src="./reveal.js/dist/reveal.js"></script>
		<script src="./reveal.js/plugin/notes/notes.js"></script>
		<script src="./reveal.js/plugin/markdown/markdown.js"></script>
		<script src="./reveal.js/plugin/highlight/highlight.js"></script>

		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
